{"dependencies":[{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":81,"index":81}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"calculateSubjectStats\", {\n    enumerable: true,\n    get: function () {\n      return calculateSubjectStats;\n    }\n  });\n  Object.defineProperty(exports, \"calculateOverallStats\", {\n    enumerable: true,\n    get: function () {\n      return calculateOverallStats;\n    }\n  });\n  Object.defineProperty(exports, \"isHoliday\", {\n    enumerable: true,\n    get: function () {\n      return isHoliday;\n    }\n  });\n  Object.defineProperty(exports, \"getCalendarMarkedDates\", {\n    enumerable: true,\n    get: function () {\n      return getCalendarMarkedDates;\n    }\n  });\n  var _dateFns = require(_dependencyMap[0], \"date-fns\");\n  const calculateSubjectStats = (subjectId, subjectName, attendance, targetPercentage) => {\n    const subjectAttendance = attendance.filter(a => a.subjectId === subjectId);\n    let present = 0;\n    let absent = 0;\n    let half = 0;\n    subjectAttendance.forEach(record => {\n      if (record.status === 'present') present += 1;else if (record.status === 'absent') absent += 1;else if (record.status === 'half') {\n        present += 0.5;\n        half += 1;\n      }\n      // holiday and cancelled don't count in total\n    });\n\n    // Total classes = present + absent + half (not holidays/cancelled)\n    const total = subjectAttendance.filter(a => a.status !== 'holiday' && a.status !== 'cancelled').length;\n    const percentage = total > 0 ? present / total * 100 : 0;\n    const target = targetPercentage / 100;\n\n    // Bunkable: How many classes can skip and still maintain target\n    // Formula: (Present - Target × Total) / (1 - Target)\n    const bunkable = total > 0 ? Math.floor((present - target * total) / (1 - target)) : 0;\n\n    // Required: How many classes must attend to reach target\n    // Formula: (Target × Total - Present) / Target\n    const required = total > 0 && percentage < targetPercentage ? Math.ceil((target * total - present) / target) : 0;\n    return {\n      subjectId,\n      subjectName,\n      present: Math.floor(present),\n      absent,\n      half,\n      total,\n      percentage: Math.round(percentage * 100) / 100,\n      bunkable: Math.max(0, bunkable),\n      required: Math.max(0, required)\n    };\n  };\n  const calculateOverallStats = (attendance, targetPercentage) => {\n    let present = 0;\n    attendance.forEach(record => {\n      if (record.status === 'present') present += 1;else if (record.status === 'half') present += 0.5;\n    });\n    const totalClasses = attendance.filter(a => a.status !== 'holiday' && a.status !== 'cancelled').length;\n    const percentage = totalClasses > 0 ? present / totalClasses * 100 : 0;\n    const target = targetPercentage / 100;\n    const bunkable = totalClasses > 0 ? Math.floor((present - target * totalClasses) / (1 - target)) : 0;\n    const required = totalClasses > 0 && percentage < targetPercentage ? Math.ceil((target * totalClasses - present) / target) : 0;\n    return {\n      totalClasses,\n      attended: Math.floor(present),\n      percentage: Math.round(percentage * 100) / 100,\n      bunkable: Math.max(0, bunkable),\n      required: Math.max(0, required)\n    };\n  };\n  const isHoliday = (date, holidays) => {\n    const checkDate = (0, _dateFns.parseISO)(date);\n    return holidays.some(holiday => {\n      const start = (0, _dateFns.parseISO)(holiday.startDate);\n      const end = (0, _dateFns.parseISO)(holiday.endDate);\n      return (0, _dateFns.isWithinInterval)(checkDate, {\n        start,\n        end\n      });\n    });\n  };\n  const getCalendarMarkedDates = (attendance, holidays) => {\n    const marked = {};\n\n    // Mark attendance\n    attendance.forEach(record => {\n      let color = '#9CA3AF'; // grey for holiday/cancelled\n\n      if (record.status === 'present') color = '#10B981'; // green\n      else if (record.status === 'absent') color = '#EF4444'; // red\n      else if (record.status === 'half') color = '#F59E0B'; // orange\n\n      marked[record.date] = {\n        marked: true,\n        dotColor: color\n      };\n    });\n    return marked;\n  };\n});","lineCount":116,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"calculateSubjectStats"],[10,34,4,0],[11,4,4,0],[12,2,4,0],[13,2,59,0,"Object"],[13,8,59,0],[13,9,59,0,"defineProperty"],[13,23,59,0],[13,24,59,0,"exports"],[13,31,59,0],[14,4,59,0,"enumerable"],[14,14,59,0],[15,4,59,0,"get"],[15,7,59,0],[15,18,59,0,"get"],[15,19,59,0],[16,6,59,0],[16,13,59,0,"calculateOverallStats"],[16,34,59,0],[17,4,59,0],[18,2,59,0],[19,2,94,0,"Object"],[19,8,94,0],[19,9,94,0,"defineProperty"],[19,23,94,0],[19,24,94,0,"exports"],[19,31,94,0],[20,4,94,0,"enumerable"],[20,14,94,0],[21,4,94,0,"get"],[21,7,94,0],[21,18,94,0,"get"],[21,19,94,0],[22,6,94,0],[22,13,94,0,"isHoliday"],[22,22,94,0],[23,4,94,0],[24,2,94,0],[25,2,104,0,"Object"],[25,8,104,0],[25,9,104,0,"defineProperty"],[25,23,104,0],[25,24,104,0,"exports"],[25,31,104,0],[26,4,104,0,"enumerable"],[26,14,104,0],[27,4,104,0,"get"],[27,7,104,0],[27,18,104,0,"get"],[27,19,104,0],[28,6,104,0],[28,13,104,0,"getCalendarMarkedDates"],[28,35,104,0],[29,4,104,0],[30,2,104,0],[31,2,1,0],[31,6,1,0,"_dateFns"],[31,14,1,0],[31,17,1,0,"require"],[31,24,1,0],[31,25,1,0,"_dependencyMap"],[31,39,1,0],[32,2,4,7],[32,8,4,13,"calculateSubjectStats"],[32,29,4,34],[32,32,4,37,"calculateSubjectStats"],[32,33,5,2,"subjectId"],[32,42,5,19],[32,44,6,2,"subjectName"],[32,55,6,21],[32,57,7,2,"attendance"],[32,67,7,32],[32,69,8,2,"targetPercentage"],[32,85,8,26],[32,90,9,19],[33,4,10,2],[33,10,10,8,"subjectAttendance"],[33,27,10,25],[33,30,10,28,"attendance"],[33,40,10,38],[33,41,10,39,"filter"],[33,47,10,45],[33,48,10,46,"a"],[33,49,10,47],[33,53,10,51,"a"],[33,54,10,52],[33,55,10,53,"subjectId"],[33,64,10,62],[33,69,10,67,"subjectId"],[33,78,10,76],[33,79,10,77],[34,4,12,2],[34,8,12,6,"present"],[34,15,12,13],[34,18,12,16],[34,19,12,17],[35,4,13,2],[35,8,13,6,"absent"],[35,14,13,12],[35,17,13,15],[35,18,13,16],[36,4,14,2],[36,8,14,6,"half"],[36,12,14,10],[36,15,14,13],[36,16,14,14],[37,4,16,2,"subjectAttendance"],[37,21,16,19],[37,22,16,20,"forEach"],[37,29,16,27],[37,30,16,28,"record"],[37,36,16,34],[37,40,16,38],[38,6,17,4],[38,10,17,8,"record"],[38,16,17,14],[38,17,17,15,"status"],[38,23,17,21],[38,28,17,26],[38,37,17,35],[38,39,17,37,"present"],[38,46,17,44],[38,50,17,48],[38,51,17,49],[38,52,17,50],[38,57,18,9],[38,61,18,13,"record"],[38,67,18,19],[38,68,18,20,"status"],[38,74,18,26],[38,79,18,31],[38,87,18,39],[38,89,18,41,"absent"],[38,95,18,47],[38,99,18,51],[38,100,18,52],[38,101,18,53],[38,106,19,9],[38,110,19,13,"record"],[38,116,19,19],[38,117,19,20,"status"],[38,123,19,26],[38,128,19,31],[38,134,19,37],[38,136,19,39],[39,8,20,6,"present"],[39,15,20,13],[39,19,20,17],[39,22,20,20],[40,8,21,6,"half"],[40,12,21,10],[40,16,21,14],[40,17,21,15],[41,6,22,4],[42,6,23,4],[43,4,24,2],[43,5,24,3],[43,6,24,4],[45,4,26,2],[46,4,27,2],[46,10,27,8,"total"],[46,15,27,13],[46,18,27,16,"subjectAttendance"],[46,35,27,33],[46,36,27,34,"filter"],[46,42,27,40],[46,43,28,4,"a"],[46,44,28,5],[46,48,28,9,"a"],[46,49,28,10],[46,50,28,11,"status"],[46,56,28,17],[46,61,28,22],[46,70,28,31],[46,74,28,35,"a"],[46,75,28,36],[46,76,28,37,"status"],[46,82,28,43],[46,87,28,48],[46,98,29,2],[46,99,29,3],[46,100,29,4,"length"],[46,106,29,10],[47,4,31,2],[47,10,31,8,"percentage"],[47,20,31,18],[47,23,31,21,"total"],[47,28,31,26],[47,31,31,29],[47,32,31,30],[47,35,31,34,"present"],[47,42,31,41],[47,45,31,44,"total"],[47,50,31,49],[47,53,31,53],[47,56,31,56],[47,59,31,59],[47,60,31,60],[48,4,32,2],[48,10,32,8,"target"],[48,16,32,14],[48,19,32,17,"targetPercentage"],[48,35,32,33],[48,38,32,36],[48,41,32,39],[50,4,34,2],[51,4,35,2],[52,4,36,2],[52,10,36,8,"bunkable"],[52,18,36,16],[52,21,36,19,"total"],[52,26,36,24],[52,29,36,27],[52,30,36,28],[52,33,37,6,"Math"],[52,37,37,10],[52,38,37,11,"floor"],[52,43,37,16],[52,44,37,17],[52,45,37,18,"present"],[52,52,37,25],[52,55,37,28,"target"],[52,61,37,34],[52,64,37,37,"total"],[52,69,37,42],[52,74,37,47],[52,75,37,48],[52,78,37,51,"target"],[52,84,37,57],[52,85,37,58],[52,86,37,59],[52,89,38,6],[52,90,38,7],[54,4,40,2],[55,4,41,2],[56,4,42,2],[56,10,42,8,"required"],[56,18,42,16],[56,21,42,19,"total"],[56,26,42,24],[56,29,42,27],[56,30,42,28],[56,34,42,32,"percentage"],[56,44,42,42],[56,47,42,45,"targetPercentage"],[56,63,42,61],[56,66,43,6,"Math"],[56,70,43,10],[56,71,43,11,"ceil"],[56,75,43,15],[56,76,43,16],[56,77,43,17,"target"],[56,83,43,23],[56,86,43,26,"total"],[56,91,43,31],[56,94,43,34,"present"],[56,101,43,41],[56,105,43,45,"target"],[56,111,43,51],[56,112,43,52],[56,115,44,6],[56,116,44,7],[57,4,46,2],[57,11,46,9],[58,6,47,4,"subjectId"],[58,15,47,13],[59,6,48,4,"subjectName"],[59,17,48,15],[60,6,49,4,"present"],[60,13,49,11],[60,15,49,13,"Math"],[60,19,49,17],[60,20,49,18,"floor"],[60,25,49,23],[60,26,49,24,"present"],[60,33,49,31],[60,34,49,32],[61,6,50,4,"absent"],[61,12,50,10],[62,6,51,4,"half"],[62,10,51,8],[63,6,52,4,"total"],[63,11,52,9],[64,6,53,4,"percentage"],[64,16,53,14],[64,18,53,16,"Math"],[64,22,53,20],[64,23,53,21,"round"],[64,28,53,26],[64,29,53,27,"percentage"],[64,39,53,37],[64,42,53,40],[64,45,53,43],[64,46,53,44],[64,49,53,47],[64,52,53,50],[65,6,54,4,"bunkable"],[65,14,54,12],[65,16,54,14,"Math"],[65,20,54,18],[65,21,54,19,"max"],[65,24,54,22],[65,25,54,23],[65,26,54,24],[65,28,54,26,"bunkable"],[65,36,54,34],[65,37,54,35],[66,6,55,4,"required"],[66,14,55,12],[66,16,55,14,"Math"],[66,20,55,18],[66,21,55,19,"max"],[66,24,55,22],[66,25,55,23],[66,26,55,24],[66,28,55,26,"required"],[66,36,55,34],[67,4,56,2],[67,5,56,3],[68,2,57,0],[68,3,57,1],[69,2,59,7],[69,8,59,13,"calculateOverallStats"],[69,29,59,34],[69,32,59,37,"calculateOverallStats"],[69,33,60,2,"attendance"],[69,43,60,32],[69,45,61,2,"targetPercentage"],[69,61,61,26],[69,66,62,19],[70,4,63,2],[70,8,63,6,"present"],[70,15,63,13],[70,18,63,16],[70,19,63,17],[71,4,65,2,"attendance"],[71,14,65,12],[71,15,65,13,"forEach"],[71,22,65,20],[71,23,65,21,"record"],[71,29,65,27],[71,33,65,31],[72,6,66,4],[72,10,66,8,"record"],[72,16,66,14],[72,17,66,15,"status"],[72,23,66,21],[72,28,66,26],[72,37,66,35],[72,39,66,37,"present"],[72,46,66,44],[72,50,66,48],[72,51,66,49],[72,52,66,50],[72,57,67,9],[72,61,67,13,"record"],[72,67,67,19],[72,68,67,20,"status"],[72,74,67,26],[72,79,67,31],[72,85,67,37],[72,87,67,39,"present"],[72,94,67,46],[72,98,67,50],[72,101,67,53],[73,4,68,2],[73,5,68,3],[73,6,68,4],[74,4,70,2],[74,10,70,8,"totalClasses"],[74,22,70,20],[74,25,70,23,"attendance"],[74,35,70,33],[74,36,70,34,"filter"],[74,42,70,40],[74,43,71,4,"a"],[74,44,71,5],[74,48,71,9,"a"],[74,49,71,10],[74,50,71,11,"status"],[74,56,71,17],[74,61,71,22],[74,70,71,31],[74,74,71,35,"a"],[74,75,71,36],[74,76,71,37,"status"],[74,82,71,43],[74,87,71,48],[74,98,72,2],[74,99,72,3],[74,100,72,4,"length"],[74,106,72,10],[75,4,74,2],[75,10,74,8,"percentage"],[75,20,74,18],[75,23,74,21,"totalClasses"],[75,35,74,33],[75,38,74,36],[75,39,74,37],[75,42,74,41,"present"],[75,49,74,48],[75,52,74,51,"totalClasses"],[75,64,74,63],[75,67,74,67],[75,70,74,70],[75,73,74,73],[75,74,74,74],[76,4,75,2],[76,10,75,8,"target"],[76,16,75,14],[76,19,75,17,"targetPercentage"],[76,35,75,33],[76,38,75,36],[76,41,75,39],[77,4,77,2],[77,10,77,8,"bunkable"],[77,18,77,16],[77,21,77,19,"totalClasses"],[77,33,77,31],[77,36,77,34],[77,37,77,35],[77,40,78,6,"Math"],[77,44,78,10],[77,45,78,11,"floor"],[77,50,78,16],[77,51,78,17],[77,52,78,18,"present"],[77,59,78,25],[77,62,78,28,"target"],[77,68,78,34],[77,71,78,37,"totalClasses"],[77,83,78,49],[77,88,78,54],[77,89,78,55],[77,92,78,58,"target"],[77,98,78,64],[77,99,78,65],[77,100,78,66],[77,103,79,6],[77,104,79,7],[78,4,81,2],[78,10,81,8,"required"],[78,18,81,16],[78,21,81,19,"totalClasses"],[78,33,81,31],[78,36,81,34],[78,37,81,35],[78,41,81,39,"percentage"],[78,51,81,49],[78,54,81,52,"targetPercentage"],[78,70,81,68],[78,73,82,6,"Math"],[78,77,82,10],[78,78,82,11,"ceil"],[78,82,82,15],[78,83,82,16],[78,84,82,17,"target"],[78,90,82,23],[78,93,82,26,"totalClasses"],[78,105,82,38],[78,108,82,41,"present"],[78,115,82,48],[78,119,82,52,"target"],[78,125,82,58],[78,126,82,59],[78,129,83,6],[78,130,83,7],[79,4,85,2],[79,11,85,9],[80,6,86,4,"totalClasses"],[80,18,86,16],[81,6,87,4,"attended"],[81,14,87,12],[81,16,87,14,"Math"],[81,20,87,18],[81,21,87,19,"floor"],[81,26,87,24],[81,27,87,25,"present"],[81,34,87,32],[81,35,87,33],[82,6,88,4,"percentage"],[82,16,88,14],[82,18,88,16,"Math"],[82,22,88,20],[82,23,88,21,"round"],[82,28,88,26],[82,29,88,27,"percentage"],[82,39,88,37],[82,42,88,40],[82,45,88,43],[82,46,88,44],[82,49,88,47],[82,52,88,50],[83,6,89,4,"bunkable"],[83,14,89,12],[83,16,89,14,"Math"],[83,20,89,18],[83,21,89,19,"max"],[83,24,89,22],[83,25,89,23],[83,26,89,24],[83,28,89,26,"bunkable"],[83,36,89,34],[83,37,89,35],[84,6,90,4,"required"],[84,14,90,12],[84,16,90,14,"Math"],[84,20,90,18],[84,21,90,19,"max"],[84,24,90,22],[84,25,90,23],[84,26,90,24],[84,28,90,26,"required"],[84,36,90,34],[85,4,91,2],[85,5,91,3],[86,2,92,0],[86,3,92,1],[87,2,94,7],[87,8,94,13,"isHoliday"],[87,17,94,22],[87,20,94,25,"isHoliday"],[87,21,94,26,"date"],[87,25,94,38],[87,27,94,40,"holidays"],[87,35,94,59],[87,40,94,73],[88,4,95,2],[88,10,95,8,"checkDate"],[88,19,95,17],[88,22,95,20],[88,26,95,20,"parseISO"],[88,34,95,28],[88,35,95,28,"parseISO"],[88,43,95,28],[88,45,95,29,"date"],[88,49,95,33],[88,50,95,34],[89,4,97,2],[89,11,97,9,"holidays"],[89,19,97,17],[89,20,97,18,"some"],[89,24,97,22],[89,25,97,23,"holiday"],[89,32,97,30],[89,36,97,34],[90,6,98,4],[90,12,98,10,"start"],[90,17,98,15],[90,20,98,18],[90,24,98,18,"parseISO"],[90,32,98,26],[90,33,98,26,"parseISO"],[90,41,98,26],[90,43,98,27,"holiday"],[90,50,98,34],[90,51,98,35,"startDate"],[90,60,98,44],[90,61,98,45],[91,6,99,4],[91,12,99,10,"end"],[91,15,99,13],[91,18,99,16],[91,22,99,16,"parseISO"],[91,30,99,24],[91,31,99,24,"parseISO"],[91,39,99,24],[91,41,99,25,"holiday"],[91,48,99,32],[91,49,99,33,"endDate"],[91,56,99,40],[91,57,99,41],[92,6,100,4],[92,13,100,11],[92,17,100,11,"isWithinInterval"],[92,25,100,27],[92,26,100,27,"isWithinInterval"],[92,42,100,27],[92,44,100,28,"checkDate"],[92,53,100,37],[92,55,100,39],[93,8,100,41,"start"],[93,13,100,46],[94,8,100,48,"end"],[95,6,100,52],[95,7,100,53],[95,8,100,54],[96,4,101,2],[96,5,101,3],[96,6,101,4],[97,2,102,0],[97,3,102,1],[98,2,104,7],[98,8,104,13,"getCalendarMarkedDates"],[98,30,104,35],[98,33,104,38,"getCalendarMarkedDates"],[98,34,105,2,"attendance"],[98,44,105,32],[98,46,106,2,"holidays"],[98,54,106,21],[98,59,107,84],[99,4,108,2],[99,10,108,8,"marked"],[99,16,108,73],[99,19,108,76],[99,20,108,77],[99,21,108,78],[101,4,110,2],[102,4,111,2,"attendance"],[102,14,111,12],[102,15,111,13,"forEach"],[102,22,111,20],[102,23,111,21,"record"],[102,29,111,27],[102,33,111,31],[103,6,112,4],[103,10,112,8,"color"],[103,15,112,13],[103,18,112,16],[103,27,112,25],[103,28,112,26],[103,29,112,27],[105,6,114,4],[105,10,114,8,"record"],[105,16,114,14],[105,17,114,15,"status"],[105,23,114,21],[105,28,114,26],[105,37,114,35],[105,39,114,37,"color"],[105,44,114,42],[105,47,114,45],[105,56,114,54],[105,57,114,55],[105,58,114,56],[106,6,114,56],[106,11,115,9],[106,15,115,13,"record"],[106,21,115,19],[106,22,115,20,"status"],[106,28,115,26],[106,33,115,31],[106,41,115,39],[106,43,115,41,"color"],[106,48,115,46],[106,51,115,49],[106,60,115,58],[106,61,115,59],[106,62,115,60],[107,6,115,60],[107,11,116,9],[107,15,116,13,"record"],[107,21,116,19],[107,22,116,20,"status"],[107,28,116,26],[107,33,116,31],[107,39,116,37],[107,41,116,39,"color"],[107,46,116,44],[107,49,116,47],[107,58,116,56],[107,59,116,57],[107,60,116,58],[109,6,118,4,"marked"],[109,12,118,10],[109,13,118,11,"record"],[109,19,118,17],[109,20,118,18,"date"],[109,24,118,22],[109,25,118,23],[109,28,118,26],[110,8,118,28,"marked"],[110,14,118,34],[110,16,118,36],[110,20,118,40],[111,8,118,42,"dotColor"],[111,16,118,50],[111,18,118,52,"color"],[112,6,118,58],[112,7,118,59],[113,4,119,2],[113,5,119,3],[113,6,119,4],[114,4,121,2],[114,11,121,9,"marked"],[114,17,121,15],[115,2,122,0],[115,3,122,1],[116,0,122,2],[116,3]],"functionMap":{"names":["<global>","calculateSubjectStats","attendance.filter$argument_0","subjectAttendance.forEach$argument_0","subjectAttendance.filter$argument_0","calculateOverallStats","attendance.forEach$argument_0","isHoliday","holidays.some$argument_0","getCalendarMarkedDates"],"mappings":"AAA;qCCG;8CCM,8BD;4BEM;GFQ;IGI,uDH;CD6B;qCKE;qBCM;GDG;IHG,uDG;CLqB;yBOE;uBCG;GDI;CPC;sCSE;qBHO;GGQ;CTG"},"hasCjsExports":false},"type":"js/module"}]}